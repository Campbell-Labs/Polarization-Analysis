function [objects, objectIndex] = loadObjects(parentObject, metadataFilename)
% loadObjects

objectDirs = getMetadataFolders(parentObject.getFullPath(), metadataFilename);

numObjects = length(objectDirs);

objects = createEmptyCellArray(trial.subjectType.subjectClass.empty, numObjects);

for i=1:numObjects
    trial.subjects{i} = trial.subjects{i}.loadSubject(trial, objectDirs{i});
end

if ~isempty(trial.subjects)
    trial.subjectIndex = 1;
end


end

